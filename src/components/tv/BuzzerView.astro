---
import ViewContainer from '../shared/ViewContainer.astro';
---
<ViewContainer id="view-buzzer">
    <div class="tv-layout">
        <div class="tv-header">
            <h1 class="tv-title glow-strong">Y2K DATA CORRUPTION</h1>
            <p class="tv-subtitle">PROTOCOL 4 - CORRUPTED AUDIO</p>
        </div>
        <div class="tv-content">
            <div class="text-center">
                <!-- HTML5 Audio Player (controllable) -->
                <div id="audio-player-container" class="hidden mb-3">
                    <audio id="audio-player" style="display: none;"></audio>
                    <div id="audio-visualizer" class="tv-audio-visualizer">
                        <div class="audio-bar" style="animation: audioBar 0.5s ease-in-out infinite alternate;"></div>
                        <div class="audio-bar" style="animation: audioBar 0.7s ease-in-out infinite alternate;"></div>
                        <div class="audio-bar" style="animation: audioBar 0.4s ease-in-out infinite alternate;"></div>
                        <div class="audio-bar" style="animation: audioBar 0.6s ease-in-out infinite alternate;"></div>
                        <div class="audio-bar" style="animation: audioBar 0.5s ease-in-out infinite alternate;"></div>
                        <div class="audio-bar" style="animation: audioBar 0.8s ease-in-out infinite alternate;"></div>
                        <div class="audio-bar" style="animation: audioBar 0.45s ease-in-out infinite alternate;"></div>
                        <div class="audio-bar" style="animation: audioBar 0.55s ease-in-out infinite alternate;"></div>
                    </div>
                    <div id="audio-paused-indicator" class="tv-paused hidden">
                        [ PAUSED ]
                    </div>
                </div>

                <!-- Track reveal (hidden until revealed) -->
                <div id="audio-reveal" class="hidden mb-3">
                    <p class="tv-label">THE ANSWER:</p>
                    <p id="audio-track-title" class="tv-reveal glow-strong"></p>
                    <p id="audio-artist" class="tv-status"></p>
                </div>

                <p id="buzzer-hint" class="tv-main-message">
                    AUDIO DEGRADING... IDENTIFY BEFORE DATA LOSS
                </p>
                <div id="buzzer-locked-display" class="mt-3 hidden">
                    <p class="tv-label">LOCKED BY:</p>
                    <p id="buzzer-locked-team" class="tv-reveal glow-strong"></p>
                </div>
                <div id="buzzer-ready-display" class="mt-3">
                    <p class="tv-active-indicator glow blink">BUZZER ACTIVE</p>
                </div>
            </div>
        </div>
        <div class="tv-instructions" id="buzzer-instructions">
            <div class="tv-instructions-box">
                <p class="instruction-title">PARTIAL SIGNAL RECOVERED</p>
                <p class="instruction-text">The Y2K bug has corrupted our audio archives. <strong>Identify the transmission before data degrades!</strong> First responder locks in. Wrong answer = signal lost.</p>
            </div>
        </div>
        <div class="tv-footer">
            <div id="buzzer-scoreboard"></div>
        </div>
    </div>
</ViewContainer>
